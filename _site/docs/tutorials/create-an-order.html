<h1 id="create-an-order">Create an order</h1>

<p>This tutorial takes about 20 minutes to complete and presents a standard order creation workflow. You start by listing the books in stock, add a new customer, and then create an order that references both the customer and the book purchased.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>To complete this tutorial, you must have command line access to curl and be able to send requests to the Bookstore Management API. You can integrate the API with your test environment or run it locally.</p>

<p>To learn how to run the API locally, see <a href="test-with-json-server.md">Test with JSON Server</a>.</p>

<h2 id="step-1-get-the-book-inventory">Step 1: Get the book inventory</h2>

<p>To add a book to an order, you must know its <code class="language-plaintext highlighter-rouge">id</code>. We will use <code class="language-plaintext highlighter-rouge">GET</code> with the <code class="language-plaintext highlighter-rouge">/books</code> endpoint to obtain a list of example books. Then, we will choose a book to use in this tutorial.</p>

<ol>
  <li>
    <p>To list the books in stock, enter <code class="language-plaintext highlighter-rouge">curl -X GET {server_url}:{port}/books</code>, using your own <code class="language-plaintext highlighter-rouge">{server_url}</code> and <code class="language-plaintext highlighter-rouge">{port}</code>:</p>

    <blockquote>
      <p><strong>Tip:</strong>
For example, if using json-server, you might enter <code class="language-plaintext highlighter-rouge">curl -X GET localhost:3000/books</code>.</p>
    </blockquote>

    <p>The Bookstore Management API returns a <code class="language-plaintext highlighter-rouge">200 OK</code> along with a response body in the following format:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5rzn"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mastering the Art of French Cooking, Vol. 1"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"author_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Child"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"author_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Julia"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"publisher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Knopf Doubleday Publishing Group"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"year_published"</span><span class="p">:</span><span class="w"> </span><span class="mi">2011</span><span class="p">,</span><span class="w">
   </span><span class="nl">"ISBN-10"</span><span class="p">:</span><span class="w"> </span><span class="mi">9780307958174</span><span class="p">,</span><span class="w">
   </span><span class="nl">"genre"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cookbooks"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hardcover"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"used"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.99"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"in_stock"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>Choose any book <code class="language-plaintext highlighter-rouge">id</code> and note it for later use in this tutorial.</p>
  </li>
</ol>

<h2 id="step-2-create-a-customer">Step 2: Create a customer</h2>

<p>When you create an order, you must specify a customer. We will use <code class="language-plaintext highlighter-rouge">POST</code> with the <code class="language-plaintext highlighter-rouge">/customers</code> endpoint to add a new customer who has not yet visited the store.</p>

<ol>
  <li>
    <p>To create a customer, enter the following curl request:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> curl <span class="nt">-X</span> POST <span class="s1">'{server_url}:{port}/customers'</span> <span class="se">\</span>
 <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
 <span class="nt">--data</span> <span class="s1">'{
     "last_name": "Jameson",
     "first_name": "Michael",
     "telephone": 2018724543,
     "email": "mjameson@gmail.com",
     }'</span>
</code></pre></div>    </div>

    <p>The Bookstore Management API returns a <code class="language-plaintext highlighter-rouge">201 Created</code>, along with a response body similar to the following:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ogb"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jameson"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Michael"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"telephone"</span><span class="p">:</span><span class="w"> </span><span class="mi">2018724543</span><span class="p">,</span><span class="w">
   </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mjameson@gmail.com"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>Note the <code class="language-plaintext highlighter-rouge">id</code> for use in the next step.</p>
  </li>
</ol>

<h2 id="step-3-create-an-order">Step 3: Create an order</h2>

<p>Now that you know the book and the customer, use <code class="language-plaintext highlighter-rouge">POST</code> with the <code class="language-plaintext highlighter-rouge">/orders</code> endpoint to create a new order.</p>

<blockquote>
  <p><strong>Tip:</strong><br />
In the following example, <code class="language-plaintext highlighter-rouge">book_id</code> is an array. To add multiple books to an order, you might use <code class="language-plaintext highlighter-rouge">["9hne", "7dpc"]</code>, where each number is the <code class="language-plaintext highlighter-rouge">id</code> for one book.</p>
</blockquote>

<ul>
  <li>
    <p>To create an order, enter the following curl request. Use the value of book <code class="language-plaintext highlighter-rouge">id</code> in <code class="language-plaintext highlighter-rouge">book_id</code> and the value of customer <code class="language-plaintext highlighter-rouge">id</code> in <code class="language-plaintext highlighter-rouge">customer_id</code>:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  curl <span class="nt">-X</span> POST <span class="s1">'{server_url}:{port}/orders'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="sb">`</span><span class="o">{</span>
      <span class="s2">"order_date"</span>: <span class="s2">"2024-02-22"</span>,
      <span class="s2">"number_of_items"</span>: 1,
      <span class="s2">"customer_id"</span>: <span class="s2">"3mys"</span>,
      <span class="s2">"book_id"</span>: <span class="o">[</span><span class="s2">"8ajv"</span><span class="o">]</span>
      <span class="o">}</span><span class="s1">'
</span></code></pre></div>    </div>

    <p>The Bookstore Management API returns a <code class="language-plaintext highlighter-rouge">201 Created</code>, along with a response body similar to the following:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8kdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-04-19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3mys"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"book_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"5rzn"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.89"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.88"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ul>

<h2 id="what-to-do-next">What to do next</h2>

<p>Now that you know how to manage customers and orders, proceed with your integration or read other topics to learn more about the Bookstore Management API.</p>

<ul>
  <li><a href="update-store.md">Update a store</a></li>
  <li><a href="get-store-inventory.md">Get store inventory</a></li>
  <li><a href="tutorials/orders-customer-date.md">Get orders by customer or date</a></li>
</ul>
